{"version":3,"sources":["webpack:///./src/app/pages/login/login.module.ts","webpack:///./src/app/pages/login/login.page.html","webpack:///./src/app/pages/login/login.page.scss","webpack:///./src/app/pages/login/login.page.ts"],"names":[],"mappings":"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","file":"pages-login-login-module.js","sourcesContent":["import {NgModule} from '@angular/core';\nimport {CommonModule} from '@angular/common';\nimport {FormsModule, ReactiveFormsModule} from '@angular/forms';\nimport {Routes, RouterModule} from '@angular/router';\n\nimport {IonicModule} from '@ionic/angular';\n\nimport {LoginPage} from './login.page';\nimport { InternationalPhoneModule } from 'ng4-intl-phone';\n\nconst routes: Routes = [\n    {\n        path: '',\n        component: LoginPage\n    }\n];\n\n@NgModule({\n    imports: [\n        CommonModule,\n        FormsModule,\n        IonicModule,\n        ReactiveFormsModule,\n        InternationalPhoneModule,\n        RouterModule.forChild(routes)\n    ],\n    declarations: [LoginPage]\n})\nexport class LoginPageModule {\n}\n","module.exports = \"<ion-content fullscreen padding>\\n\\n    <ion-slides #slides [options]=\\\"{onlyExternal: false}\\\" >\\n        <ion-slide class=\\\"slide-container1\\\">\\n            <h1 class=\\\"title\\\">Welcome to <br><b>ULPGC <i>RideSharing</i></b></h1>\\n            <div class=\\\"user-photo\\\" padding-top>\\n                <ion-avatar>\\n                    <img [src]=\\\"currentUser?.photo || '/assets/icon/favicon.jpg'\\\">\\n                </ion-avatar>\\n            </div>\\n\\n\\n            <footer>\\n                <p class=\\\"text-policy\\\">Read our\\n                    <ion-label color=\\\"secondary\\\">Privacy Policy</ion-label>\\n                    . Tap \\\"Agree and Continue\\\" to accept\\n                    the\\n                    <ion-label color=\\\"secondary\\\">Terms of Service</ion-label>\\n                </p>\\n                <ion-button class=\\\"accept-button\\\" (click)=\\\"slides.slideNext()\\\">Agree and Continue</ion-button>\\n            </footer>\\n\\n        </ion-slide>\\n        <ion-slide >\\n\\n            <div *ngIf=\\\"!phoneSent\\\" class=\\\"slide-container2\\\">\\n                <h2 class=\\\"phone-title\\\">Verify your phone number</h2>\\n                <p class=\\\"phone-text\\\">ULPGC RideSharing will send a SMS message to verify your phone number.<br>\\n                    Enter your country code and phone number.</p>\\n\\n                <div class=\\\"phone-input\\\">\\n                    <int-phone-prefix [defaultCountry]=\\\"'es'\\\"\\n                                      [(ngModel)]=\\\"phoneNumber\\\"></int-phone-prefix>\\n\\n                    <div>\\n                        <ion-spinner name=\\\"lines\\\" *ngIf=\\\"isSpinner\\\"></ion-spinner>\\n                    </div>\\n                    <div>\\n                        <p class=\\\"text-policy\\\"> You must be <ion-label color=\\\"secondary\\\">at least 16 years old</ion-label> to register.</p>\\n                        <ion-button class=\\\"accept-button\\\" type=\\\"submit\\\" color=\\\"primary\\\" (click)=\\\"logIn()\\\">Next</ion-button>\\n                    </div>\\n                </div>\\n            </div>\\n\\n            <div *ngIf=\\\"phoneSent\\\" class=\\\"slide-container2\\\">\\n                <h2 class=\\\"phone-title\\\">Verify your phone number</h2>\\n                <p class=\\\"phone-text\\\">Waiting to automatically detect an SMS sent to your phone number</p>\\n\\n                <div class=\\\"phone-input\\\">\\n                    <ion-input class=\\\"code-input\\\" type=\\\"number\\\" [(ngModel)]=\\\"confirmationCode\\\"\\n                               placeholder=\\\"Enter the code here\\\"></ion-input>\\n\\n                    <ion-button type=\\\"submit\\\" color=\\\"primary\\\" (click)=\\\"sendCode()\\\">Next</ion-button>\\n                </div>\\n            </div>\\n        </ion-slide>\\n\\n    </ion-slides>\\n\\n\\n</ion-content>\\n\\n\\n\"","module.exports = \"ion-slides {\\n  height: 100%; }\\n  ion-slides .slide-container1 {\\n    display: -webkit-flex;\\n    display: flex;\\n    -webkit-flex-direction: column;\\n            flex-direction: column;\\n    -webkit-justify-content: space-around;\\n            justify-content: space-around; }\\n  ion-slides .slide-container1 .title {\\n      font-size: 30px; }\\n  ion-slides .slide-container2 {\\n    height: 100%;\\n    margin-top: 30px;\\n    display: -webkit-flex;\\n    display: flex;\\n    -webkit-flex-direction: column;\\n            flex-direction: column;\\n    -webkit-justify-content: start;\\n            justify-content: start; }\\n  ion-slides .slide-container2 .phone-title {\\n      font-size: 26px;\\n      color: #002e63; }\\n  ion-slides .slide-container2 .phone-text {\\n      margin: 10px; }\\n  ion-slides .slide-container2 .phone-input {\\n      display: -webkit-flex;\\n      display: flex;\\n      -webkit-flex-direction: column;\\n              flex-direction: column;\\n      -webkit-justify-content: space-between;\\n              justify-content: space-between;\\n      height: inherit;\\n      margin-bottom: 50px;\\n      margin-top: 20px; }\\n  ion-slides .slide-container2 .code-input {\\n      max-height: 30px;\\n      border: 1px solid #dedede !important; }\\n  .user-photo ion-avatar {\\n  margin: 0 auto;\\n  width: 270px;\\n  height: 270px; }\\n  .text-policy {\\n  font-size: 15px; }\\n  .accept-button {\\n  width: 95%; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9tb25leWJhL0Rlc2t0b3AvdW50aXRsZWQgZm9sZGVyL3RmbS9zcmMvYXBwL3BhZ2VzL2xvZ2luL2xvZ2luLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQTtFQUNFLFlBQVksRUFBQTtFQURkO0lBSUkscUJBQWE7SUFBYixhQUFhO0lBQ2IsOEJBQXNCO1lBQXRCLHNCQUFzQjtJQUN0QixxQ0FBNkI7WUFBN0IsNkJBQTZCLEVBQUE7RUFOakM7TUFTTSxlQUFlLEVBQUE7RUFUckI7SUFnQkksWUFBWTtJQUNaLGdCQUFnQjtJQUNoQixxQkFBYTtJQUFiLGFBQWE7SUFDYiw4QkFBc0I7WUFBdEIsc0JBQXNCO0lBQ3RCLDhCQUFzQjtZQUF0QixzQkFBc0IsRUFBQTtFQXBCMUI7TUF1Qk0sZUFBZTtNQUNmLGNBQWMsRUFBQTtFQXhCcEI7TUE0Qk0sWUFBWSxFQUFBO0VBNUJsQjtNQWdDTSxxQkFBYTtNQUFiLGFBQWE7TUFDYiw4QkFBc0I7Y0FBdEIsc0JBQXNCO01BQ3RCLHNDQUE4QjtjQUE5Qiw4QkFBOEI7TUFDOUIsZUFBZTtNQUNmLG1CQUFtQjtNQUNuQixnQkFBZ0IsRUFBQTtFQXJDdEI7TUF3Q00sZ0JBQWdCO01BRWhCLG9DQUFvQyxFQUFBO0VBUTFDO0VBQ0UsY0FBYztFQUNkLFlBQVk7RUFDWixhQUFhLEVBQUE7RUFHZjtFQUNFLGVBQWUsRUFBQTtFQUdqQjtFQUNFLFVBQVUsRUFBQSIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2xvZ2luL2xvZ2luLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIlxuaW9uLXNsaWRlcyB7XG4gIGhlaWdodDogMTAwJTtcblxuICAuc2xpZGUtY29udGFpbmVyMSB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYXJvdW5kO1xuXG4gICAgLnRpdGxlIHtcbiAgICAgIGZvbnQtc2l6ZTogMzBweDtcbiAgICB9XG5cblxuICB9XG5cbiAgLnNsaWRlLWNvbnRhaW5lcjIge1xuICAgIGhlaWdodDogMTAwJTtcbiAgICBtYXJnaW4tdG9wOiAzMHB4O1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHN0YXJ0O1xuXG4gICAgLnBob25lLXRpdGxlIHtcbiAgICAgIGZvbnQtc2l6ZTogMjZweDtcbiAgICAgIGNvbG9yOiAjMDAyZTYzO1xuICAgIH1cblxuICAgIC5waG9uZS10ZXh0IHtcbiAgICAgIG1hcmdpbjogMTBweDtcbiAgICB9XG5cbiAgICAucGhvbmUtaW5wdXQge1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgICBoZWlnaHQ6IGluaGVyaXQ7XG4gICAgICBtYXJnaW4tYm90dG9tOiA1MHB4O1xuICAgICAgbWFyZ2luLXRvcDogMjBweDtcbiAgICB9XG4gICAgLmNvZGUtaW5wdXQge1xuICAgICAgbWF4LWhlaWdodDogMzBweDtcblxuICAgICAgYm9yZGVyOiAxcHggc29saWQgI2RlZGVkZSAhaW1wb3J0YW50O1xuXG4gICAgfVxuXG4gIH1cblxufVxuXG4udXNlci1waG90byBpb24tYXZhdGFyIHtcbiAgbWFyZ2luOiAwIGF1dG87XG4gIHdpZHRoOiAyNzBweDtcbiAgaGVpZ2h0OiAyNzBweDtcbn1cblxuLnRleHQtcG9saWN5IHtcbiAgZm9udC1zaXplOiAxNXB4O1xufVxuXG4uYWNjZXB0LWJ1dHRvbiB7XG4gIHdpZHRoOiA5NSU7XG59XG5cblxuXG4iXX0= */\"","import {AfterViewInit, Component, OnDestroy, OnInit, ViewChild} from '@angular/core';\nimport {FormBuilder, FormGroup, Validators} from '@angular/forms';\nimport {Router} from '@angular/router';\nimport {AuthService} from '../../core/services/auth.service';\nimport {FcmService} from '../../core/services/fcm.service';\nimport {Platform} from '@ionic/angular';\nimport {FirebaseAuthentication} from '@ionic-native/firebase-authentication/ngx';\nimport {LoadingService} from '../../core/services/loading.service';\nimport {Slides} from 'ionic-angular';\n\n@Component({\n    selector: 'app-login',\n    templateUrl: './login.page.html',\n    styleUrls: ['./login.page.scss'],\n})\nexport class LoginPage implements OnInit {\n    private loginForm: FormGroup;\n\n\n    public phoneNumber: string;\n    public phoneSent: boolean;\n    public verificationID: string;\n    public confirmationCode: any;\n    public isSpinner: boolean;\n    @ViewChild(Slides) slides: Slides;\n\n    public constructor(private formBuilder: FormBuilder,\n                       private authService: AuthService,\n                       private router: Router,\n                       private fcmService: FcmService,\n                       private platform: Platform,\n                       private fireAuth: FirebaseAuthentication,\n    ) {\n        this.isSpinner = false;\n    }\n\n    ngOnInit() {\n        this.createLoginForm();\n\n    }\n\n    ionViewWillEnter() {\n        this.phoneNumber = null;\n        this.phoneSent = false;\n        this.verificationID = null;\n        this.confirmationCode = null;\n\n    }\n\n    private createLoginForm(): void {\n        this.loginForm = this.formBuilder.group({\n            email: [null, [Validators.required, Validators.email]],\n            password: [null, Validators.required]\n        });\n    }\n\n\n    async logIn() {\n        this.isSpinner = true;\n\n        if (this.phoneNumber && this.phoneNumber.length > 0 && this.phoneNumber.includes('+')) {\n            const phoneExists = await this.authService.checkPhone(this.phoneNumber).catch(e => {\n                console.error(e);\n                this.isSpinner = false;\n            });\n            console.log(phoneExists);\n            if (phoneExists && phoneExists.length > 0) {\n                if (this.platform.is('ios')) {\n                    this.verificationID = await this.fireAuth.verifyPhoneNumber(this.phoneNumber, 120000).catch(e => {\n                        console.error(e);\n                        // alert(JSON.stringify(e));\n                        this.isSpinner = false;\n                    });\n                } else if (this.platform.is('android')) {\n                    const {verificationId} = await this.fireAuth.verifyPhoneNumber(this.phoneNumber, 120000).catch(e => {\n                        console.error(e);\n                        // alert(JSON.stringify(e));\n                        this.isSpinner = false;\n                    });\n                    this.verificationID = verificationId;\n                }\n                console.log(this.platform);\n                this.verificationID = await this.fireAuth.verifyPhoneNumber(this.phoneNumber, 120000);\n                this.isSpinner = false;\n                this.phoneSent = true;\n                console.log('si');\n            } else {\n                console.log(this.phoneNumber);\n                this.authService.createUser({\n                    phoneNumber: this.phoneNumber\n                }).then(async () => {\n                    this.verificationID = await this.fireAuth.verifyPhoneNumber(this.phoneNumber, 120000);\n                    this.isSpinner = false;\n                    this.phoneSent = true;\n                });\n            }\n        } else {\n            console.log('no');\n        }\n    }\n\n    public async sendCode(): Promise<any> {\n        this.isSpinner = true;\n\n\n        await this.fireAuth.signInWithVerificationId(this.verificationID, this.confirmationCode);\n\n        // await this.fireAuth.signInAndRetrieveDataWithCredential(credential).catch(e => {\n        //     console.error(e);\n        //     this.utils.dissmissLoading();\n        // });\n\n\n        this.isSpinner = false;\n    }\n}\n"],"sourceRoot":""}