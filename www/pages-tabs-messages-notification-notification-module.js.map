{"version":3,"sources":["webpack:///./src/app/core/services/ride.service.ts","webpack:///./src/app/pages/tabs/messages/notification/notification-page.component.html","webpack:///./src/app/pages/tabs/messages/notification/notification-page.component.scss","webpack:///./src/app/pages/tabs/messages/notification/notification-page.component.ts","webpack:///./src/app/pages/tabs/messages/notification/notification.module.ts"],"names":[],"mappings":"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","file":"pages-tabs-messages-notification-notification-module.js","sourcesContent":["import {Injectable} from '@angular/core';\nimport {Ride} from '../../shared/models/Ride';\nimport {AngularFireDatabase} from '@angular/fire/database';\nimport {Observable} from 'rxjs';\nimport {Request} from '../../shared/models/Request';\nimport {User} from '../../shared/models/User';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class RideService {\n    private collectionEndPoint = 'rides';\n\n    constructor(private db: AngularFireDatabase) {\n    }\n\n    public createRide(ride: Ride): Promise<void> {\n        ride.id = this.db.createPushId();\n        return this.db.object<Ride>(`${this.collectionEndPoint}/${ride.id}`).set(ride);\n    }\n\n    public updateRide(ride: Ride): Promise<void> {\n        return this.db.object<Ride>(`${this.collectionEndPoint}/${ride.id}`).update(ride);\n    }\n\n    public deleteRide(rideId: string): Promise<void> {\n        return this.db.object<Ride>(`${this.collectionEndPoint}/${rideId}`).remove();\n    }\n\n    public getRides(): Observable<Ride[]> {\n        return this.db.list<Ride>(this.collectionEndPoint, ref => ref.orderByChild('dateTime')\n            .startAt(new Date().getTime())).valueChanges();\n    }\n\n    public getRidesByUserId(userId: string): Observable<Ride[]> {\n        return this.db.list<Ride>(this.collectionEndPoint, ref => ref.orderByChild('userId').equalTo(userId)).valueChanges();\n    }\n\n    public getRide(rideId: string): Observable<Ride> {\n        return this.db.object<Ride>(`${this.collectionEndPoint}/${rideId}`).valueChanges();\n    }\n}\n","module.exports = \"<ion-header>\\n  <ion-toolbar>\\n    <ion-title>Notification</ion-title>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button></ion-back-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n<ion-card>\\n  <ion-card-content>\\n    <div>The user {{notification.user.name}} has booked a seat in your car for the ride</div>\\n    <ion-label>{{notification.ride.originName}}</ion-label>\\n     -\\n    <ion-label>{{notification.ride.destinationName}}</ion-label>\\n    <br>\\n    <ion-label>Status: {{notification.state}}</ion-label>\\n    <br>\\n    <ion-button (click)=\\\"acceptBooking()\\\">Accept</ion-button>\\n    <ion-button (click)=\\\"refuseBooking()\\\">Refuse</ion-button>\\n  </ion-card-content>\\n</ion-card>\\n</ion-content>\\n\"","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL3RhYnMvbWVzc2FnZXMvbm90aWZpY2F0aW9uL25vdGlmaWNhdGlvbi1wYWdlLmNvbXBvbmVudC5zY3NzIn0= */\"","import { Component, OnInit } from '@angular/core';\nimport {ActivatedRoute, Router} from '@angular/router';\nimport {State} from '../../../../shared/ui.utils';\nimport {Request} from '../../../../shared/models/Request';\nimport {RequestService} from '../../../../core/services/request.service';\nimport {RideService} from '../../../../core/services/ride.service';\nimport {User} from '../../../../shared/models/User';\n\n@Component({\n  selector: 'app-notifications',\n  templateUrl: './notification-page.component.html',\n  styleUrls: ['./notification-page.component.scss'],\n})\nexport class NotificationPage implements OnInit {\n  public notification: Request;\n\n  constructor(private route: ActivatedRoute,\n              private router: Router,\n              private requestService: RequestService,\n              private rideService: RideService) {\n    this.route.queryParams.subscribe(params => {\n      if (this.router.getCurrentNavigation().extras.state) {\n        this.notification = this.router.getCurrentNavigation().extras.state.notification;\n      }\n    });\n  }\n\n  ngOnInit() {\n  }\n\n  public acceptBooking(): void {\n    // this.notification.ride.seatedUsers = [];\n    // if (this.notification.ride.numberOfSeats > 0) {\n    //   this.notification.ride.numberOfSeats--;\n    // }\n    // this.notification.ride.seatedUsers.push(this.notification.user);\n    // this.rideService.updateRide(this.notification.ride);\n    // this.notification.state = State.accepted;\n    // this.requestService.updateRequest(this.notification);\n\n  }\n\n  public refuseBooking(): void {\n    this.notification.state = State.refused;\n    this.requestService.updateRequest(this.notification);\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { NotificationPage } from './notification-page.component';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: NotificationPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [NotificationPage]\n})\nexport class NotificationPageModule {}\n"],"sourceRoot":""}