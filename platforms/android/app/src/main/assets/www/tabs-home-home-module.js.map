{"version":3,"sources":["webpack:///./src/app/pages/tabs/home/home.component.html","webpack:///./src/app/pages/tabs/home/home.component.scss","webpack:///./src/app/pages/tabs/home/home.component.ts","webpack:///./src/app/pages/tabs/home/home.module.ts"],"names":[],"mappings":"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","file":"tabs-home-home-module.js","sourcesContent":["module.exports = \"<ion-header>\\n    <ion-toolbar color=\\\"primary\\\">\\n        <ion-title text-center>\\n            {{ 'HOME.title' | translate:params }}\\n        </ion-title>\\n    </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n    <div class=\\\"search-button-container\\\" [hidden]=\\\"showSearchContainer\\\">\\n        <ion-button expand=\\\"full\\\" color=\\\"secondary\\\" (click)=\\\"changeSearchBoxState()\\\">\\n            <ion-label>{{ 'HOME.searchButton' | translate:params }} </ion-label>\\n            <ion-icon name=\\\"search\\\"></ion-icon>\\n        </ion-button>\\n    </div>\\n    <div [hidden]=\\\"!showSearchContainer\\\" class=\\\"search-container\\\">\\n        <form [formGroup]=\\\"dateTimeForm\\\">\\n            <ion-item>\\n                <ion-icon name=\\\"locate\\\" color=\\\"primary\\\"></ion-icon>\\n                <input class=\\\"search-input\\\" #searchOrigin (input)=\\\"clearLocationIfBlank($event.target.value, 'origin')\\\"\\n                       placeholder=\\\"{{ 'GENERIC.from' | translate:params }}\\\" formControlName=\\\"origin\\\">\\n            </ion-item>\\n            <ion-item>\\n                <ion-icon name=\\\"pin\\\" color=\\\"primary\\\"></ion-icon>\\n                <input class=\\\"search-input\\\" #searchDestination placeholder=\\\"{{ 'GENERIC.to' | translate:params }}\\\"\\n                       (input)=\\\"clearLocationIfBlank($event.target.value, 'destination')\\\" formControlName=\\\"destination\\\">\\n            </ion-item>\\n\\n            <ion-item (click)=\\\"openDatePicker($event)\\\">\\n                <ion-icon name=\\\"calendar\\\" color=\\\"primary\\\"></ion-icon>\\n                <ion-input formControlName=\\\"date\\\" placeholder=\\\"{{ 'GENERIC.date' | translate:params }}\\\"></ion-input>\\n            </ion-item>\\n            <!-- <ion-item (click)=\\\"openDatePicker($event)\\\">\\n                 <ion-icon name=\\\"calendar\\\"></ion-icon>\\n                 <ion-label formControlName=\\\"date\\\">{{date | date: 'dd MMM yyyy'}}</ion-label>\\n             </ion-item>-->\\n            <ion-item *ngIf=\\\"dateTimeForm.get('date').value\\\">\\n                <ion-icon name=\\\"clock\\\" color=\\\"primary\\\"></ion-icon>\\n                <ion-datetime display-format=\\\"h:mm A\\\" picker-format=\\\"HH:mm\\\" formControlName=\\\"time\\\"\\n                              placeholder=\\\"{{ 'GENERIC.time' | translate:params }}\\\">\\n                </ion-datetime>\\n            </ion-item>\\n        </form>\\n        <ion-card class=\\\"button-container\\\">\\n            <ion-button fill=\\\"clear\\\" (click)=\\\"changeSearchBoxState()\\\">\\n                <!--  <ion-icon name=\\\"close-circle\\\"></ion-icon>-->\\n                <ion-label>{{ 'GENERIC.cancel' | translate:params }}</ion-label>\\n\\n            </ion-button>\\n\\n            <ion-button fill=\\\"clear\\\" (click)=\\\"filterItems()\\\" id=\\\"search-button\\\">\\n                <ion-label>{{ 'GENERIC.search' | translate:params }}</ion-label>\\n                <ion-icon name=\\\"search\\\"></ion-icon>\\n            </ion-button>\\n        </ion-card>\\n    </div>\\n    <ion-card mode=\\\"md\\\" *ngFor=\\\"let ride of filteredRides\\\" (click)=\\\"goToDetailsPage(ride)\\\">\\n        <ion-card-content class=\\\"ride-item\\\">\\n            <div class=\\\"date-info\\\">\\n                <ion-card-subtitle>{{ride.dateTime | date: 'dd MMM h:mm'}}</ion-card-subtitle>\\n                <label id=\\\"no-seats-text\\\" *ngIf=\\\"ride.numberOfSeats == ride.seatedUserIds?.length\\\">no seats available</label>\\n            </div>\\n\\n            <ion-label id=\\\"itinerary-label\\\">{{ride.originName}} - {{ride.destinationName}}</ion-label>\\n        </ion-card-content>\\n    </ion-card>\\n\\n    <ion-fab vertical=\\\"bottom\\\" horizontal=\\\"end\\\" slot=\\\"fixed\\\">\\n        <ion-fab-button expand=\\\"block\\\" [routerLink]=\\\"'/ride-form'\\\" routerDirection=\\\"forward\\\" color=\\\"secondary\\\">\\n            <ion-icon name=\\\"add\\\"></ion-icon>\\n        </ion-fab-button>\\n    </ion-fab>\\n</ion-content>\\n\"","module.exports = \":host .search-button-container {\\n  padding: 10px 10px 0 10px; }\\n\\n:host .search-container {\\n  display: -webkit-flex;\\n  display: flex;\\n  -webkit-flex-direction: column;\\n          flex-direction: column; }\\n\\n:host .search-container .search-input {\\n    width: 100%; }\\n\\n:host .search-container .calendar-label {\\n    padding-left: 16px; }\\n\\n:host .search-container .button-container {\\n    display: -webkit-flex;\\n    display: flex;\\n    -webkit-justify-content: space-between;\\n            justify-content: space-between;\\n    background-color: #fe9b2b; }\\n\\n:host .search-container #search-button {\\n    color: white; }\\n\\n:host .search-container ion-input {\\n    width: 100%;\\n    margin-left: 20px;\\n    font-family: system-ui;\\n    font-size: 16px; }\\n\\n:host .search-container input {\\n    width: 100%;\\n    margin-left: 20px;\\n    font-family: system-ui;\\n    font-size: 16px; }\\n\\n:host ion-card {\\n  margin: 15px 10px; }\\n\\n:host ion-card .date-info {\\n    display: -webkit-flex;\\n    display: flex;\\n    -webkit-justify-content: space-between;\\n            justify-content: space-between; }\\n\\n:host ion-card .date-info ion-card-subtitle {\\n      color: #002e65; }\\n\\n:host ion-card .date-info #no-seats-text {\\n      color: red; }\\n\\n:host ion-card .ride-item {\\n    border-top: 5px solid #002e65;\\n    display: -webkit-flex;\\n    display: flex;\\n    -webkit-flex-direction: column;\\n            flex-direction: column;\\n    -webkit-justify-content: space-between;\\n            justify-content: space-between; }\\n\\n:host ion-card #itinerary-label {\\n    font-size: 18px;\\n    color: black; }\\n\\n:host .sc-ion-card-md-h {\\n  border-radius: 0px !important; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9tb25leWJhL0Rlc2t0b3AvdW50aXRsZWQgZm9sZGVyL3RmbS9zcmMvYXBwL3BhZ2VzL3RhYnMvaG9tZS9ob21lLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBR0kseUJBQXlCLEVBQUE7O0FBSDdCO0VBT0kscUJBQWE7RUFBYixhQUFhO0VBQ2IsOEJBQXNCO1VBQXRCLHNCQUFzQixFQUFBOztBQVIxQjtJQVdNLFdBQVcsRUFBQTs7QUFYakI7SUFlTSxrQkFBa0IsRUFBQTs7QUFmeEI7SUFtQk0scUJBQWE7SUFBYixhQUFhO0lBQ2Isc0NBQThCO1lBQTlCLDhCQUE4QjtJQUM5Qix5QkFBeUIsRUFBQTs7QUFyQi9CO0lBMEJNLFlBQVksRUFBQTs7QUExQmxCO0lBOEJNLFdBQVc7SUFDWCxpQkFBaUI7SUFDakIsc0JBQXNCO0lBQ3RCLGVBQWUsRUFBQTs7QUFqQ3JCO0lBcUNNLFdBQVc7SUFDWCxpQkFBaUI7SUFDakIsc0JBQXNCO0lBQ3RCLGVBQWUsRUFBQTs7QUF4Q3JCO0VBNkNJLGlCQUFpQixFQUFBOztBQTdDckI7SUErQ00scUJBQWE7SUFBYixhQUFhO0lBQ2Isc0NBQThCO1lBQTlCLDhCQUE4QixFQUFBOztBQWhEcEM7TUFrRFEsY0FBYyxFQUFBOztBQWxEdEI7TUFxRFEsVUFBVSxFQUFBOztBQXJEbEI7SUEyRE0sNkJBQTZCO0lBQzdCLHFCQUFhO0lBQWIsYUFBYTtJQUNiLDhCQUFzQjtZQUF0QixzQkFBc0I7SUFDdEIsc0NBQThCO1lBQTlCLDhCQUE4QixFQUFBOztBQTlEcEM7SUFrRU0sZUFBZTtJQUNmLFlBQVksRUFBQTs7QUFuRWxCO0VBd0VJLDZCQUE2QixFQUFBIiwiZmlsZSI6InNyYy9hcHAvcGFnZXMvdGFicy9ob21lL2hvbWUuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyI6aG9zdCB7XG5cbiAgLnNlYXJjaC1idXR0b24tY29udGFpbmVyIHtcbiAgICBwYWRkaW5nOiAxMHB4IDEwcHggMCAxMHB4O1xuICB9XG5cbiAgLnNlYXJjaC1jb250YWluZXIge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcblxuICAgIC5zZWFyY2gtaW5wdXQge1xuICAgICAgd2lkdGg6IDEwMCU7XG4gICAgfVxuXG4gICAgLmNhbGVuZGFyLWxhYmVsIHtcbiAgICAgIHBhZGRpbmctbGVmdDogMTZweDtcbiAgICB9XG5cbiAgICAuYnV0dG9uLWNvbnRhaW5lciB7XG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2ZlOWIyYjtcblxuICAgIH1cblxuICAgICNzZWFyY2gtYnV0dG9ue1xuICAgICAgY29sb3I6IHdoaXRlO1xuICAgIH1cblxuICAgIGlvbi1pbnB1dCB7XG4gICAgICB3aWR0aDogMTAwJTtcbiAgICAgIG1hcmdpbi1sZWZ0OiAyMHB4O1xuICAgICAgZm9udC1mYW1pbHk6IHN5c3RlbS11aTtcbiAgICAgIGZvbnQtc2l6ZTogMTZweDtcbiAgICB9XG5cbiAgICBpbnB1dCB7XG4gICAgICB3aWR0aDogMTAwJTtcbiAgICAgIG1hcmdpbi1sZWZ0OiAyMHB4O1xuICAgICAgZm9udC1mYW1pbHk6IHN5c3RlbS11aTtcbiAgICAgIGZvbnQtc2l6ZTogMTZweDtcbiAgICB9XG4gIH1cblxuICBpb24tY2FyZCB7XG4gICAgbWFyZ2luOiAxNXB4IDEwcHg7XG4gICAgLmRhdGUtaW5mb3tcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgICBpb24tY2FyZC1zdWJ0aXRsZSB7XG4gICAgICAgIGNvbG9yOiAjMDAyZTY1O1xuICAgICAgfVxuICAgICAgI25vLXNlYXRzLXRleHQge1xuICAgICAgICBjb2xvcjogcmVkO1xuICAgICAgfVxuICAgIH1cblxuXG4gICAgLnJpZGUtaXRlbSB7XG4gICAgICBib3JkZXItdG9wOiA1cHggc29saWQgIzAwMmU2NTtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgIH1cblxuICAgICNpdGluZXJhcnktbGFiZWwge1xuICAgICAgZm9udC1zaXplOiAxOHB4O1xuICAgICAgY29sb3I6IGJsYWNrO1xuICAgIH1cblxuICB9XG4gIC5zYy1pb24tY2FyZC1tZC1oIHtcbiAgICBib3JkZXItcmFkaXVzOiAwcHggIWltcG9ydGFudDtcbiAgfVxufVxuXG5cbiJdfQ== */\"","import {Component, ElementRef, NgZone, OnInit, ViewChild} from '@angular/core';\nimport {RideService} from '../../../core/services/ride.service';\nimport {Ride} from '../../../shared/models/Ride';\nimport {FormBuilder, FormGroup, Validators} from '@angular/forms';\nimport {NavigationExtras, Router} from '@angular/router';\nimport {bindCallback} from 'rxjs';\nimport {map} from 'rxjs/operators';\nimport * as moment from 'moment';\nimport {PopoverController} from '@ionic/angular';\nimport {DatePickerComponent} from './date-picker/date-picker.component';\nimport Autocomplete = google.maps.places.Autocomplete;\nimport PlaceResult = google.maps.places.PlaceResult;\nimport LatLngLiteral = google.maps.LatLngLiteral;\nimport DirectionsService = google.maps.DirectionsService;\nimport DirectionsRequest = google.maps.DirectionsRequest;\nimport {TranslateConfigService} from '../../../core/services/translate-config.service';\n\n\n@Component({\n    selector: 'app-home',\n    templateUrl: 'home.component.html',\n    styleUrls: ['home.component.scss']\n})\nexport class HomePage implements OnInit {\n\n    @ViewChild('searchOrigin')\n    public searchOriginElementRef: ElementRef;\n    @ViewChild('searchDestination')\n    public searchDestinationElementRef: ElementRef;\n\n    public dateTimeForm: FormGroup;\n    public rides: Ride[];\n    public filteredRides: Ride[];\n\n    private latitude: number;\n    private longitude: number;\n\n    private originLocation: PlaceResult;\n    private destinationLocation: PlaceResult;\n\n    private directionsService = new DirectionsService();\n\n    private maxDistance = 5000;\n\n    public showSearchContainer = false;\n    constructor(private rideService: RideService,\n                private fb: FormBuilder,\n                private router: Router,\n                private ngZone: NgZone,\n                public popoverController: PopoverController) {\n    }\n\n    public ngOnInit(): void {\n        const originAutoComplete = new Autocomplete(this.searchOriginElementRef.nativeElement, {});\n        const destinationAutocomplete = new Autocomplete(this.searchDestinationElementRef.nativeElement, {});\n        this.setListenerTo(originAutoComplete, 'origin');\n        this.setListenerTo(destinationAutocomplete, 'destination');\n        this.getRides();\n        this.createSearchForm();\n    }\n\n    public changeSearchBoxState(): void {\n        this.createSearchForm();\n        this.filteredRides = this.rides;\n\n        this.showSearchContainer = !this.showSearchContainer;\n    }\n\n    public createSearchForm(): void {\n\n        this.dateTimeForm = this.fb.group({\n            origin: [null],\n            destination: [null],\n            date: [null],\n            time: [null]\n        });\n    }\n\n    public dateFormat(input: string): void {\n        console.log(input);\n        const dateToSet = moment(input, 'DD/MM/YYYY').toDate();\n        if (moment(input, 'DD/MM/YYYY', true).isValid()) {\n            this.dateTimeForm.get('dateTime').setValue(dateToSet);\n        }\n    }\n\n    public async openDatePicker(event: any) {\n        const popover = await this.popoverController.create({\n            component: DatePickerComponent,\n            animated: true,\n            cssClass: 'date-picker-popover',\n            event\n        });\n        popover.onDidDismiss().then((dataReturned) => {\n            if (dataReturned !== null) {\n                this.dateTimeForm.get('date').setValue(moment(dataReturned.data).format('DD MMM YYYY'));\n            }\n        });\n\n        return await popover.present();\n    }\n\n    private setListenerTo(autocomplete, type: string): void {\n        autocomplete.addListener('place_changed', () => {\n            this.ngZone.run(() => {\n                const place: PlaceResult = autocomplete.getPlace();\n\n                if (place.geometry === undefined || place.geometry === null) {\n                    return;\n                }\n\n                if (type === 'origin') {\n                    this.originLocation = place;\n                } else {\n                    this.destinationLocation = place;\n                }\n\n                this.latitude = place.geometry.location.lat();\n                this.longitude = place.geometry.location.lng();\n            });\n        });\n    }\n\n    public clearLocationIfBlank(value, type: string): void {\n        if (type === 'origin' && !value) {\n            this.originLocation = undefined;\n            this.filteredRides = this.rides;\n        } else if (type === 'destination' && !value) {\n            this.destinationLocation = undefined;\n            this.filteredRides = this.rides;\n        }\n    }\n\n    public getRides(): void {\n        this.rideService.getRides().subscribe(rides => {\n            console.log(rides);\n            this.rides = rides;\n            this.filteredRides = rides;\n        });\n    }\n\n    public filterItems(): void {\n        if (this.originLocation) {\n            this.filterByLocation('origin');\n            console.log('despues del filtrado por origen', this.filteredRides);\n        }\n        if (this.destinationLocation) {\n            this.filterByLocation('destination');\n            console.log('despues del filtrado por destino', this.filteredRides);\n        }\n        if (this.dateTimeForm.get('date').value) {\n            this.filterByDate();\n        }\n\n    }\n\n    private filterByDate() {\n        let time = '00:00';\n        if (this.dateTimeForm.get('time').value) {\n            time = moment(this.dateTimeForm.get('time').value).format('HH:mm');\n        }\n        const date = new Date(this.dateTimeForm.get('date').value).toDateString();\n\n        const dateTime: Date = new Date(`${date} ${time}`);\n        console.log(dateTime);\n        this.filteredRides = this.filteredRides.filter(item => {\n            const itemDateTime: Date = new Date(item.dateTime);\n            if (dateTime.getDate() === itemDateTime.getDate()) {\n                return item;\n            }\n        });\n    }\n\n    private filterByLocation(source: string) {\n        const promisesArray: Promise<boolean>[] = [];\n        this.filteredRides.map(ride => {\n            promisesArray.push(this.isNearEnough(source === 'origin' ? ride.origin : ride.destination, source));\n        });\n\n        Promise.all(promisesArray).then(results => {\n            this.filteredRides = this.filteredRides.filter((ride, index) => results[index]);\n        });\n    }\n\n    public isNearEnough(rideSource: LatLngLiteral, source: string): Promise<boolean> {\n        const direction: DirectionsRequest = {\n            origin: source === 'origin' ?\n                this.originLocation.geometry.location.toJSON() : this.destinationLocation.geometry.location.toJSON(),\n            destination: rideSource,\n            travelMode: google.maps.TravelMode.DRIVING\n        };\n\n        return bindCallback(this.directionsService.route)(direction).pipe(\n            map((result => {\n                if (result[1].toString() === 'ZERO_RESULTS') {\n                    return false;\n                }\n                const distance = result[0].routes[0].legs[0].distance;\n                if (distance.value < this.maxDistance) {\n                    return true;\n                } else {\n                    return false;\n                }\n            }))).toPromise();\n    }\n\n    public goToDetailsPage(ride: Ride): void {\n        const navigationExtras: NavigationExtras = {\n            state: {\n                ride,\n                from: 'home'\n            }\n        };\n        this.router.navigate(['ride-details'], navigationExtras);\n    }\n\n\n}\n","import {IonicModule} from '@ionic/angular';\nimport {RouterModule} from '@angular/router';\nimport {NgModule} from '@angular/core';\nimport {CommonModule} from '@angular/common';\nimport {FormsModule, ReactiveFormsModule} from '@angular/forms';\nimport {HomePage} from './home.component';\nimport {CalendarModule} from 'ion2-calendar';\nimport {DatePickerComponent} from './date-picker/date-picker.component';\nimport {DatePickerModule} from './date-picker/date-picker.module';\nimport {TranslateModule} from '@ngx-translate/core';\n\n@NgModule({\n    imports: [\n        IonicModule,\n        CommonModule,\n        FormsModule,\n        ReactiveFormsModule,\n        CalendarModule,\n        DatePickerModule,\n        TranslateModule,\n        RouterModule.forChild([{path: '', component: HomePage}])\n    ],\n    declarations: [HomePage],\n    entryComponents: [DatePickerComponent],\n    providers: []\n})\nexport class HomePageModule {\n}\n"],"sourceRoot":""}