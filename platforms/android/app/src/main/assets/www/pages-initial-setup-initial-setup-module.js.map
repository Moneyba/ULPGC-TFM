{"version":3,"sources":["webpack:///./src/app/pages/initial-setup/initial-setup.module.ts","webpack:///./src/app/pages/initial-setup/initial-setup.page.html","webpack:///./src/app/pages/initial-setup/initial-setup.page.scss","webpack:///./src/app/pages/initial-setup/initial-setup.page.ts"],"names":[],"mappings":"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","file":"pages-initial-setup-initial-setup-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport {FormsModule, ReactiveFormsModule} from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { InitialSetupPage } from './initial-setup.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: InitialSetupPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ReactiveFormsModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [InitialSetupPage]\n})\nexport class InitialSetupPageModule {}\n","module.exports = \"\\n<ion-content fullscreen>\\n  <form [formGroup]=\\\"setUpForm\\\">\\n    <h2 class=\\\"title\\\">Profile info</h2>\\n\\n        <p class=\\\"text-description\\\">Please introduce your name and an optional photo:</p>\\n        <div class=\\\"user-photo\\\">\\n          <ion-avatar>\\n            <img [src]=\\\"photo\\\" (click)=\\\"uploadNewPhoto()\\\">\\n          </ion-avatar>\\n        </div>\\n        <ion-item>\\n          <ion-input formControlName=\\\"name\\\" required placeholder=\\\"Type your name here\\\"></ion-input>\\n        </ion-item>\\n\\n\\n\\n  </form>\\n  <footer padding>\\n    <ion-button (click)=\\\"updateUser()\\\" [disabled]=\\\"setUpForm.invalid\\\">Next</ion-button>\\n  </footer>\\n\\n</ion-content>\\n\\n\"","module.exports = \"ion-content {\\n  height: 100%; }\\n  ion-content form {\\n    height: 70%;\\n    display: -webkit-flex;\\n    display: flex;\\n    -webkit-flex-direction: column;\\n            flex-direction: column;\\n    -webkit-justify-content: space-around;\\n            justify-content: space-around;\\n    margin: 0 30px; }\\n  ion-content .text-description {\\n    font-size: 18px;\\n    text-align: center; }\\n  ion-content .title {\\n    font-size: 26px;\\n    color: #002e63;\\n    text-align: center; }\\n  .user-photo ion-avatar {\\n  margin: 0 auto;\\n  width: 200px;\\n  height: 200px; }\\n  ion-button {\\n  width: 100%; }\\n  ion-item {\\n  margin: 0 20px; }\\n  footer {\\n  height: 27%;\\n  display: -webkit-flex;\\n  display: flex;\\n  -webkit-flex-direction: column;\\n          flex-direction: column;\\n  -webkit-justify-content: flex-end;\\n          justify-content: flex-end; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9tb25leWJhL0Rlc2t0b3AvdW50aXRsZWQgZm9sZGVyL3RmbS9zcmMvYXBwL3BhZ2VzL2luaXRpYWwtc2V0dXAvaW5pdGlhbC1zZXR1cC5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxZQUFZLEVBQUE7RUFEZDtJQUlJLFdBQVc7SUFDWCxxQkFBYTtJQUFiLGFBQWE7SUFDYiw4QkFBc0I7WUFBdEIsc0JBQXNCO0lBQ3RCLHFDQUE2QjtZQUE3Qiw2QkFBNkI7SUFDN0IsY0FBYyxFQUFBO0VBUmxCO0lBWUksZUFBZTtJQUNmLGtCQUFrQixFQUFBO0VBYnRCO0lBaUJJLGVBQWU7SUFDZixjQUFjO0lBQ2Qsa0JBQWtCLEVBQUE7RUFJdEI7RUFDRSxjQUFjO0VBQ2QsWUFBWTtFQUNaLGFBQWEsRUFBQTtFQUtmO0VBQ0UsV0FBVyxFQUFBO0VBR2I7RUFDRSxjQUNGLEVBQUE7RUFFQTtFQUNFLFdBQVc7RUFDWCxxQkFBYTtFQUFiLGFBQWE7RUFDYiw4QkFBc0I7VUFBdEIsc0JBQXNCO0VBQ3RCLGlDQUF5QjtVQUF6Qix5QkFBeUIsRUFBQSIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2luaXRpYWwtc2V0dXAvaW5pdGlhbC1zZXR1cC5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJpb24tY29udGVudCB7XG4gIGhlaWdodDogMTAwJTtcblxuICBmb3JtIHtcbiAgICBoZWlnaHQ6IDcwJTtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1hcm91bmQ7XG4gICAgbWFyZ2luOiAwIDMwcHg7XG4gIH1cblxuICAudGV4dC1kZXNjcmlwdGlvbiB7XG4gICAgZm9udC1zaXplOiAxOHB4O1xuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgfVxuXG4gIC50aXRsZSB7XG4gICAgZm9udC1zaXplOiAyNnB4O1xuICAgIGNvbG9yOiAjMDAyZTYzO1xuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgfVxufVxuXG4udXNlci1waG90byBpb24tYXZhdGFyIHtcbiAgbWFyZ2luOiAwIGF1dG87XG4gIHdpZHRoOiAyMDBweDtcbiAgaGVpZ2h0OiAyMDBweDtcbn1cblxuXG5cbmlvbi1idXR0b24ge1xuICB3aWR0aDogMTAwJTtcbn1cblxuaW9uLWl0ZW0ge1xuICBtYXJnaW46IDAgMjBweFxufVxuXG5mb290ZXIge1xuICBoZWlnaHQ6IDI3JTtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAganVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDtcbn1cbiJdfQ== */\"","import {Component, OnInit, ViewChild} from '@angular/core';\nimport {FormBuilder, FormGroup, Validators} from '@angular/forms';\nimport {ActivatedRoute, Router} from '@angular/router';\nimport {User} from '../../shared/models/User';\nimport {Camera, CameraOptions} from '@ionic-native/camera/ngx';\nimport {UserService} from '../../core/services/user.service';\nimport {UtilsService} from '../../core/services/utils.service';\nimport {LoadingService} from '../../core/services/loading.service';\nimport {Slides} from 'ionic-angular';\n\n@Component({\n  selector: 'app-initial-setup',\n  templateUrl: './initial-setup.page.html',\n  styleUrls: ['./initial-setup.page.scss'],\n})\nexport class InitialSetupPage implements OnInit {\n  public setUpForm: FormGroup;\n  public currentUser: User;\n  public photoHasChanged = false;\n  public photo: string;\n  @ViewChild('slides') slides: Slides;\n\n  constructor(\n      private fb: FormBuilder,\n      private router: Router,\n      private route: ActivatedRoute,\n      private userService: UserService,\n      private utilsService: UtilsService,\n      private loadingService: LoadingService,\n      private camera: Camera\n  ) {\n    //this.currentUser = this.userService.user.getValue();\n    this.userService.getLoggedUser().subscribe( user => {\n      this.currentUser = user;\n      this.photo = this.currentUser ? this.currentUser.photo : '/assets/icon/favicon.jpg';\n    });\n  }\n\n  ngOnInit() {\n    this.createSetupForm();\n  }\n\n  public createSetupForm(): void {\n    this.setUpForm = this.fb.group({\n      name: [this.currentUser ? this.currentUser.name : '', Validators.required],\n      photo: [this.photo]\n    });\n  }\n\n  public updateUser() {\n    const user: User = {\n      id: this.currentUser.id,\n      name: this.setUpForm.get('name').value,\n      photo: this.setUpForm.get('photo').value,\n      averageRating: 0,\n      numberOfRatings: 0,\n      points: {\n        currentPoints: 0,\n        blockedPoints: 0,\n        exchangedPoints: 0\n      }\n    };\n    this.userService.updateUser(user).then(() => {\n      this.router.navigateByUrl('tabs');\n    });\n  }\n\n  public async uploadNewPhoto(): Promise<void> {\n    const cameraOptions: CameraOptions = await this.utilsService.actionSheetCameraOptions();\n    const preview = await this.camera.getPicture(cameraOptions);\n    const base64Image = 'data:image / jpeg;base64,' + preview;\n    this.loadingService.presentLoading();\n    const preset = 'gfllyeot';\n    const url = await this.utilsService.uploadBase64ImageToCloudinary(base64Image, preset);\n    this.loadingService.dissmissLoading();\n    this.currentUser.photo = url;\n    this.photoHasChanged = true;\n  }\n\n\n}\n"],"sourceRoot":""}