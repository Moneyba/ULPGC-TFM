{"version":3,"sources":["webpack:///./src/app/core/services/loading.service.ts","webpack:///./src/app/pages/tabs/profile/rewards-catalog/reward-form/reward-form-page.component.html","webpack:///./src/app/pages/tabs/profile/rewards-catalog/reward-form/reward-form-page.component.scss","webpack:///./src/app/pages/tabs/profile/rewards-catalog/reward-form/reward-form-page.component.ts","webpack:///./src/app/pages/tabs/profile/rewards-catalog/reward-form/reward-form.module.ts"],"names":[],"mappings":"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","file":"pages-tabs-profile-rewards-catalog-reward-form-reward-form-module.js","sourcesContent":["import { Injectable } from '@angular/core';\nimport {LoadingController} from '@ionic/angular';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class LoadingService {\n\n  isLoading = false;\n\n  constructor(private loadingController: LoadingController) {\n\n  }\n\n  async presentLoading() {\n    this.isLoading = true;\n    return await this.loadingController.create({\n      duration: 5000,\n    }).then(a => {\n      a.present().then(() => {\n        console.log('presented');\n        if (!this.isLoading) {\n          a.dismiss().then(() => console.log('abort presenting'));\n        }\n      });\n    });\n  }\n\n  async dissmissLoading() {\n    this.isLoading = false;\n    return await this.loadingController.dismiss().then(() => console.log('dismissed'));\n  }\n}\n","module.exports = \"<ion-header>\\n  <ion-toolbar color=\\\"primary\\\">\\n    <ion-title *ngIf=\\\"!reward?.id\\\">{{ 'REWARDS.newReward' | translate:params }}</ion-title>\\n    <ion-title *ngIf=\\\"reward?.id\\\">{{ 'REWARDS.editReward' | translate:params }}</ion-title>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button></ion-back-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <form [formGroup]=\\\"rewardForm\\\">\\n    <div class=\\\"reward-photo\\\" padding-top>\\n      <ion-avatar>\\n        <img [src]=\\\"photo\\\" (click)=\\\"uploadNewPhoto()\\\">\\n      </ion-avatar>\\n    </div>\\n    <ion-item>\\n      <ion-label>{{ 'REWARDS.name' | translate:params }}</ion-label>\\n      <ion-input formControlName=\\\"name\\\" required></ion-input>\\n    </ion-item>\\n    <ion-item>\\n      <ion-label>{{ 'REWARDS.points' | translate:params }}</ion-label>\\n      <ion-input formControlName=\\\"points\\\" type=\\\"number\\\"></ion-input>\\n    </ion-item>\\n    <ion-item>\\n      <ion-label>Stock</ion-label>\\n      <ion-input formControlName=\\\"stock\\\" type=\\\"number\\\"></ion-input>\\n    </ion-item>\\n    <ion-item>\\n      <ion-label>{{ 'REWARDS.description' | translate:params }}</ion-label>\\n      <ion-input formControlName=\\\"description\\\"></ion-input>\\n    </ion-item>\\n\\n\\n  </form>\\n  <div class=\\\"spinner-container\\\" *ngIf=\\\"isSpinning\\\">\\n    <ion-spinner name=\\\"lines\\\"></ion-spinner>\\n  </div>\\n\\n</ion-content>\\n<ion-footer >\\n  <ion-button expand=\\\"full\\\" type=\\\"submit\\\" (click)=\\\"createReward()\\\" margin-bottom\\n              [disabled]=\\\"rewardForm.invalid\\\" *ngIf=\\\"!reward?.id\\\">\\n    {{ 'GENERIC.save' | translate:params }}\\n  </ion-button>\\n  <ion-button expand=\\\"full\\\" type=\\\"submit\\\" (click)=\\\"editReward()\\\" margin-bottom\\n              [disabled]=\\\"rewardForm.invalid\\\" *ngIf=\\\"reward?.id\\\">\\n    {{ 'GENERIC.save' | translate:params }}\\n  </ion-button>\\n</ion-footer>\\n\"","module.exports = \".reward-photo ion-avatar {\\n  margin: 0 auto;\\n  width: 200px;\\n  height: 200px; }\\n\\n.spinner-container {\\n  padding-top: 10%;\\n  width: 100%;\\n  display: -webkit-flex;\\n  display: flex;\\n  -webkit-justify-content: center;\\n          justify-content: center; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9tb25leWJhL0Rlc2t0b3AvdW50aXRsZWQgZm9sZGVyL3RmbS9zcmMvYXBwL3BhZ2VzL3RhYnMvcHJvZmlsZS9yZXdhcmRzLWNhdGFsb2cvcmV3YXJkLWZvcm0vcmV3YXJkLWZvcm0tcGFnZS5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQTtFQUNFLGNBQWM7RUFDZCxZQUFZO0VBQ1osYUFBYSxFQUFBOztBQUdmO0VBQ0UsZ0JBQWdCO0VBQ2hCLFdBQVc7RUFDWCxxQkFBYTtFQUFiLGFBQWE7RUFDYiwrQkFBdUI7VUFBdkIsdUJBQXVCLEVBQUEiLCJmaWxlIjoic3JjL2FwcC9wYWdlcy90YWJzL3Byb2ZpbGUvcmV3YXJkcy1jYXRhbG9nL3Jld2FyZC1mb3JtL3Jld2FyZC1mb3JtLXBhZ2UuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJcbi5yZXdhcmQtcGhvdG8gaW9uLWF2YXRhciB7XG4gIG1hcmdpbjogMCBhdXRvO1xuICB3aWR0aDogMjAwcHg7XG4gIGhlaWdodDogMjAwcHg7XG59XG5cbi5zcGlubmVyLWNvbnRhaW5lciB7XG4gIHBhZGRpbmctdG9wOiAxMCU7XG4gIHdpZHRoOiAxMDAlO1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbn1cblxuIl19 */\"","import {Component, OnInit} from '@angular/core';\nimport {FormBuilder, FormGroup, Validators} from '@angular/forms';\nimport {UtilsService} from '../../../../../core/services/utils.service';\nimport {LoadingService} from '../../../../../core/services/loading.service';\nimport {Camera, CameraOptions} from '@ionic-native/camera/ngx';\nimport {User} from '../../../../../shared/models/User';\nimport {RewardProduct} from '../../../../../shared/models/RewardProduct';\nimport {RewardService} from '../../../../../core/services/reward.service';\nimport {ActivatedRoute, Router} from '@angular/router';\n\n@Component({\n    selector: 'app-reward',\n    templateUrl: './reward-form-page.component.html',\n    styleUrls: ['./reward-form-page.component.scss'],\n})\nexport class RewardFormPage implements OnInit {\n\n    public rewardForm: FormGroup;\n    public photoHasChanged = false;\n    public photo = '/assets/icon/favicon.jpg';\n    private reward: RewardProduct;\n    public isSpinning = false;\n\n    constructor(private utilsService: UtilsService,\n                private loadingService: LoadingService,\n                private camera: Camera,\n                private fb: FormBuilder,\n                private rewardService: RewardService,\n                private route: ActivatedRoute,\n                private router: Router) {\n       this.route.queryParams.subscribe(params => {\n            if (this.router.getCurrentNavigation().extras.state) {\n                this.reward = this.router.getCurrentNavigation().extras.state.reward;\n                this.photo = this.reward ? this.reward.photo : '/assets/icon/favicon.jpg';\n            }\n        });\n    }\n\n    ngOnInit() {\n        this.createRewardForm();\n    }\n\n    public createRewardForm(): void {\n        this.rewardForm = this.fb.group({\n            name: [this.reward ? this.reward.name : null, Validators.required],\n            photo: [this.photo],\n            points: [this.reward ? this.reward.points : null],\n            stock: [this.reward ? this.reward.stock : null],\n            description: [this.reward ? this.reward.description : null]\n        });\n    }\n\n\n    public createReward(): void {\n        const reward: RewardProduct = {\n            name: this.rewardForm.get('name').value,\n            photo: this.rewardForm.get('photo').value,\n            points: this.rewardForm.get('points').value,\n            stock: this.rewardForm.get('stock').value,\n            description: this.rewardForm.get('description').value,\n\n        };\n        this.rewardService.createReward(reward).then(() => {\n            this.router.navigate(['rewards-catalog']);\n        });\n    }\n\n    public editReward(): void {\n        const reward: RewardProduct = {\n            id: this.reward.id,\n            name: this.rewardForm.get('name').value,\n            photo: this.photo,\n            points: this.rewardForm.get('points').value,\n            stock: this.rewardForm.get('stock').value,\n            description: this.rewardForm.get('description').value,\n\n        };\n        this.rewardService.updateReward(reward).then(() => {\n            this.router.navigate(['rewards-catalog']);\n        });\n    }\n\n    public async uploadNewPhoto(): Promise<void> {\n        const cameraOptions: CameraOptions = await this.utilsService.actionSheetCameraOptions();\n        const preview = await this.camera.getPicture(cameraOptions);\n        const base64Image = 'data:image / jpeg;base64,' + preview;\n        this.isSpinning = true;\n        const preset = 'gfllyeot';\n        const url = await this.utilsService.uploadBase64ImageToCloudinary(base64Image, preset);\n        this.isSpinning = false;\n        this.photo = url;\n        this.photoHasChanged = true;\n    }\n\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport {FormsModule, ReactiveFormsModule} from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { RewardFormPage } from './reward-form-page.component';\nimport {TranslateModule} from '@ngx-translate/core';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: RewardFormPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ReactiveFormsModule,\n    TranslateModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [RewardFormPage]\n})\nexport class RewardFormPageModule {}\n"],"sourceRoot":""}